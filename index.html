<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <title>String Toolbox - Expanded MVP</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center p-6 font-sans">
  <h1 class="text-4xl font-extrabold mb-8 text-gray-800">String Toolbox</h1>

  <!-- Authentication Section -->
  <div id="auth-section" class="mb-4">
    <input id="email" placeholder="Email" class="p-2 border rounded mr-2" />
    <input id="password" type="password" placeholder="Password" class="p-2 border rounded mr-2" />
    <button onclick="signUp()" class="p-2 bg-blue-600 text-white rounded hover:bg-blue-700 mr-2">Sign Up</button>
    <button onclick="signIn()" class="p-2 bg-green-600 text-white rounded hover:bg-green-700">Login</button>
  </div>
  <div id="user-info" class="hidden mb-4">
    Logged in as: <span id="user-email"></span>
    <button onclick="logout()" class="ml-2 p-2 bg-red-600 text-white rounded hover:bg-red-700">Logout</button>
  </div>

  <textarea id="inputText" rows="6" placeholder="Paste or type your text here..."
    class="font-mono w-full max-w-3xl p-4 border border-gray-300 rounded-md mb-6 resize-y focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>

  <div class="max-w-3xl w-full grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 mb-6">
    <!-- Case Conversions -->
    <button onclick="toUpperCase()" class="action-btn">UPPERCASE</button>
    <button onclick="toLowerCase()" class="action-btn">lowercase</button>
    <button onclick="toCamelCase()" class="action-btn">camelCase</button>
    <button onclick="toSnakeCase()" class="action-btn">snake_case</button>

    <!-- Encoding -->
    <button onclick="base64Encode()" class="action-btn">Base64 Encode</button>
    <button onclick="base64Decode()" class="action-btn">Base64 Decode</button>
    <button onclick="urlEncode()" class="action-btn">URL Encode</button>
    <button onclick="urlDecode()" class="action-btn">URL Decode</button>

    <!-- Analytics -->
    <button onclick="countChars()" class="action-btn">Count Characters</button>
    <button onclick="countWords()" class="action-btn">Count Words</button>
    <button onclick="estimateReadingTime()" class="action-btn">Estimate Reading Time</button>

    <!-- Clear Button -->
    <button onclick="clearText()" class="action-btn bg-red-600 hover:bg-red-700">Clear</button>

    <!-- Clipboard -->
    <button onclick="copyOutput()" class="action-btn col-span-full sm:col-span-2 md:col-span-4 bg-green-600 hover:bg-green-700">Copy Output</button>
  </div>

  <div id="output" class="font-mono max-w-3xl w-full p-4 bg-white border border-gray-300 rounded-md min-h-[120px] whitespace-pre-wrap"></div>

  <script>
    // Firebase Configuration
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // DOM Elements
    const input = document.getElementById('inputText');
    const output = document.getElementById('output');
    const authSection = document.getElementById('auth-section');
    const userInfo = document.getElementById('user-info');
    const userEmail = document.getElementById('user-email');

    // Authentication Functions
    function signUp() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      
      auth.createUserWithEmailAndPassword(email, password)
        .then((userCredential) => {
          console.log('User signed up:', userCredential.user);
        })
        .catch((error) => {
          alert('Sign up error: ' + error.message);
        });
    }

    function signIn() {
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      
      auth.signInWithEmailAndPassword(email, password)
        .then((userCredential) => {
          console.log('User signed in:', userCredential.user);
        })
        .catch((error) => {
          alert('Sign in error: ' + error.message);
        });
    }

    function logout() {
      auth.signOut().then(() => {
        console.log('User signed out');
      }).catch((error) => {
        alert('Sign out error: ' + error.message);
      });
    }

    // Auth State Observer
    auth.onAuthStateChanged((user) => {
      if (user) {
        authSection.classList.add('hidden');
        userInfo.classList.remove('hidden');
        userEmail.textContent = user.email;
      } else {
        authSection.classList.remove('hidden');
        userInfo.classList.add('hidden');
        userEmail.textContent = '';
      }
    });

    // String Manipulation Functions
    function toUpperCase() {
      output.textContent = input.value.toUpperCase();
    }

    function toLowerCase() {
      output.textContent = input.value.toLowerCase();
    }

    function toCamelCase() {
      const text = input.value.toLowerCase().trim();
      const words = text.split(/[\s_-]+/);
      if (!words.length) {
        output.textContent = '';
        return;
      }
      const camel = words[0] + words.slice(1).map(w => w.charAt(0).toUpperCase() + w.slice(1)).join('');
      output.textContent = camel;
    }

    function toSnakeCase() {
      const text = input.value.trim();
      const snake = text.toLowerCase().replace(/\s+/g, '_').replace(/[^\w_]/g, '');
      output.textContent = snake;
    }

    function base64Encode() {
      try {
        output.textContent = btoa(input.value);
      } catch (e) {
        output.textContent = 'Invalid input for Base64 encoding.';
      }
    }

    function base64Decode() {
      try {
        output.textContent = atob(input.value);
      } catch (e) {
        output.textContent = 'Invalid Base64 string.';
      }
    }

    function urlEncode() {
      output.textContent = encodeURIComponent(input.value);
    }

    function urlDecode() {
      try {
        output.textContent = decodeURIComponent(input.value);
      } catch (e) {
        output.textContent = 'Invalid URL encoding.';
      }
    }

    function countChars() {
      output.textContent = `Characters: ${input.value.length}`;
    }

    function countWords() {
      const words = input.value.trim().split(/\s+/).filter(Boolean);
      output.textContent = `Words: ${words.length}`;
    }

    function estimateReadingTime() {
      const words = input.value.trim().split(/\s+/).filter(Boolean).length;
      // Average adult reads 200 wpm
      const minutes = Math.ceil(words / 200);
      output.textContent = `Estimated reading time: ${minutes} minute${minutes > 1 ? 's' : ''}`;
    }

    function clearText() {
      input.value = '';
      output.textContent = '';
    }

    function copyOutput() {
      if (!output.textContent) return alert('Nothing to copy!');
      navigator.clipboard.writeText(output.textContent).then(() => {
        alert('Copied to clipboard!');
      });
    }
  </script>

  <style>
    .action-btn {
      @apply bg-blue-600 text-white font-semibold py-3 rounded hover:bg-blue-700 transition;
    }
  </style>
</body>
</html>